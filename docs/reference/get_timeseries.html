<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Retrieve time series data from the RKI SurvStat api. — get_timeseries • rsurvstat</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Retrieve time series data from the RKI SurvStat api. — get_timeseries"><meta name="description" content="This function gets a weekly timeseries of disease count or incidence data
from the RKI SurvStat web API. The timeseries can be stratified by any
combination of age, geography, disease, disease subtype. Queries to the
API are cached and paged, but obviously multidimensional extracts have the
potential to need a lot of downloading."><meta property="og:description" content="This function gets a weekly timeseries of disease count or incidence data
from the RKI SurvStat web API. The timeseries can be stratified by any
combination of age, geography, disease, disease subtype. Queries to the
API are cached and paged, but obviously multidimensional extracts have the
potential to need a lot of downloading."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">rsurvstat</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/rsurvstat.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/bristol-vaccine-centre/rsurvstat/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Retrieve time series data from the RKI SurvStat api.</h1>
      <small class="dont-index">Source: <a href="https://github.com/bristol-vaccine-centre/rsurvstat/blob/HEAD/R/survstat-loader.R" class="external-link"><code>R/survstat-loader.R</code></a></small>
      <div class="d-none name"><code>get_timeseries.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function gets a weekly timeseries of disease count or incidence data
from the RKI <code>SurvStat</code> web API. The timeseries can be stratified by any
combination of age, geography, disease, disease subtype. Queries to the
API are cached and paged, but obviously multidimensional extracts have the
potential to need a lot of downloading.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">get_timeseries</span><span class="op">(</span></span>
<span>  disease <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  measure <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Count"</span>, <span class="st">"Incidence"</span><span class="op">)</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  age_group <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  age_range <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="cn">Inf</span><span class="op">)</span>,</span>
<span>  disease_subtype <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  years <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  geography <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  trim_zeros <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"leading"</span>, <span class="st">"both"</span>, <span class="st">"none"</span><span class="op">)</span>,</span>
<span>  .progress <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-disease">disease<a class="anchor" aria-label="anchor" href="#arg-disease"></a></dt>
<dd><p>the disease of interest, see <code><a href="diseases.html">rsurvstat::diseases</a></code>. This is
technically optional, and if omitted the counts of all diseases will be
returned.</p></dd>


<dt id="arg-measure">measure<a class="anchor" aria-label="anchor" href="#arg-measure"></a></dt>
<dd><p>one of <code>"Count"</code> (default) or <code>"Incidence"</code></p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>not used, must be empty.</p></dd>


<dt id="arg-age-group">age_group<a class="anchor" aria-label="anchor" href="#arg-age-group"></a></dt>
<dd><p>(optional) the age group of interest, see <code><a href="age_groups.html">rsurvstat::age_groups</a></code></p></dd>


<dt id="arg-age-range">age_range<a class="anchor" aria-label="anchor" href="#arg-age-range"></a></dt>
<dd><p>(optional) a length 2 vector with the minimum and maximum ages to consider</p></dd>


<dt id="arg-disease-subtype">disease_subtype<a class="anchor" aria-label="anchor" href="#arg-disease-subtype"></a></dt>
<dd><p>if <code>TRUE</code> the returned count will be broken down by
disease or pathogen subtype (assuming <code>disease</code> was provided).</p></dd>


<dt id="arg-years">years<a class="anchor" aria-label="anchor" href="#arg-years"></a></dt>
<dd><p>(optional) a vector of years to limit the response to.</p></dd>


<dt id="arg-geography">geography<a class="anchor" aria-label="anchor" href="#arg-geography"></a></dt>
<dd><p>(optional) a geographical breakdown can be given as a
character where it must be one of <code>state</code>, <code>nuts</code>, or <code>county</code> which
align to the 16 region <code>FedStateKey71Map</code>, 38 region <code>NutsKey71Map</code>,
or 411 region <code>CountyKey71Map</code> data respectively. Alternatively it can be
given as a subset of one of these maps, as a <code>sf</code> dataframe in which case
only that subset of regions will be returned.</p></dd>


<dt id="arg-trim-zeros">trim_zeros<a class="anchor" aria-label="anchor" href="#arg-trim-zeros"></a></dt>
<dd><p>get rid of zero counts. Either "both" (from start and end),
"leading" (from start only - the default) or "none".</p></dd>


<dt id="arg--progress">.progress<a class="anchor" aria-label="anchor" href="#arg--progress"></a></dt>
<dd><p>by default a progress bar is shown, which may be important
if many downloads are needed to fulfil the request. It can be disabled here.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>a data frame with at least <code>date</code> (weekly), and one of <code>count</code> or
<code>incidence</code> columns. Most likely it will also have <code>disease_name</code> and
<code>disease_code</code> columns, and some of <code>age_name</code>, <code>age_code</code>, <code>age_low</code>,
<code>age_high</code>, <code>geo_code</code>, <code>geo_name</code>, <code>disease_subtype_code</code>,
<code>disease_subtype_name</code> depending on options. The dataframe will be grouped
to make sure each group is a unique timeseries.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu">get_timeseries</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">diseases</span><span class="op">$</span><span class="va">`COVID-19`</span>,</span></span>
<span class="r-in"><span>  measure <span class="op">=</span> <span class="st">"Count"</span>,</span></span>
<span class="r-in"><span>  age_group <span class="op">=</span> <span class="va">age_groups</span><span class="op">$</span><span class="va">children_coarse</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 3,376 × 8</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># Groups:   age_name, age_code, disease_name, disease_code, age_low, age_high</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   [11]</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    age_name age_code count date       disease_name disease_code age_low age_high</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> 0–14     [AlterP…     1 2020-02-03 COVID-19     [KategorieN…       0       15</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> 0–14     [AlterP…     2 2020-02-10 COVID-19     [KategorieN…       0       15</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> 0–14     [AlterP…     1 2020-02-17 COVID-19     [KategorieN…       0       15</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> 0–14     [AlterP…     4 2020-02-24 COVID-19     [KategorieN…       0       15</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> 0–14     [AlterP…    39 2020-03-02 COVID-19     [KategorieN…       0       15</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> 0–14     [AlterP…   197 2020-03-09 COVID-19     [KategorieN…       0       15</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> 0–14     [AlterP…   580 2020-03-16 COVID-19     [KategorieN…       0       15</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> 0–14     [AlterP…   910 2020-03-23 COVID-19     [KategorieN…       0       15</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> 0–14     [AlterP…  <span style="text-decoration: underline;">1</span>018 2020-03-30 COVID-19     [KategorieN…       0       15</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> 0–14     [AlterP…   813 2020-04-06 COVID-19     [KategorieN…       0       15</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 3,366 more rows</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">get_timeseries</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">diseases</span><span class="op">$</span><span class="va">`COVID-19`</span>,</span></span>
<span class="r-in"><span>  measure <span class="op">=</span> <span class="st">"Count"</span>,</span></span>
<span class="r-in"><span>  age_group <span class="op">=</span> <span class="va">age_groups</span><span class="op">$</span><span class="va">children_coarse</span>,</span></span>
<span class="r-in"><span>  geography <span class="op">=</span> <span class="fu">rsurvstat</span><span class="fu">::</span><span class="va"><a href="FedStateKey71Map.html">FedStateKey71Map</a></span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>,<span class="op">]</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 33,258 × 10</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># Groups:   age_name, age_code, disease_name, disease_code, geo_name, geo_code,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   age_low, age_high [110]</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    age_name age_code         count date       disease_name disease_code geo_name</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> 0–14     [AlterPerson80]…     1 2020-02-17 COVID-19     [KategorieN… Nordrhe…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> 0–14     [AlterPerson80]…     4 2020-02-24 COVID-19     [KategorieN… Nordrhe…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> 0–14     [AlterPerson80]…    12 2020-03-02 COVID-19     [KategorieN… Nordrhe…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> 0–14     [AlterPerson80]…    23 2020-03-09 COVID-19     [KategorieN… Nordrhe…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> 0–14     [AlterPerson80]…    92 2020-03-16 COVID-19     [KategorieN… Nordrhe…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> 0–14     [AlterPerson80]…   122 2020-03-23 COVID-19     [KategorieN… Nordrhe…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> 0–14     [AlterPerson80]…   175 2020-03-30 COVID-19     [KategorieN… Nordrhe…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> 0–14     [AlterPerson80]…   151 2020-04-06 COVID-19     [KategorieN… Nordrhe…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> 0–14     [AlterPerson80]…   113 2020-04-13 COVID-19     [KategorieN… Nordrhe…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> 0–14     [AlterPerson80]…   150 2020-04-20 COVID-19     [KategorieN… Nordrhe…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 33,248 more rows</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 3 more variables: geo_code &lt;chr&gt;, age_low &lt;dbl&gt;, age_high &lt;dbl&gt;</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">get_timeseries</span><span class="op">(</span></span></span>
<span class="r-in"><span>  measure <span class="op">=</span> <span class="st">"Count"</span>,</span></span>
<span class="r-in"><span>  years <span class="op">=</span> <span class="fl">2024</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 3,861 × 5</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># Groups:   disease_name, disease_code [80]</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    disease_name  disease_code                             count date        year</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> Acinetobacter [PathogenOut].[KategorieNz].[Krankheit …    16 2024-01-08  <span style="text-decoration: underline;">2</span>024</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> Acinetobacter [PathogenOut].[KategorieNz].[Krankheit …    22 2024-01-15  <span style="text-decoration: underline;">2</span>024</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> Acinetobacter [PathogenOut].[KategorieNz].[Krankheit …    26 2024-01-22  <span style="text-decoration: underline;">2</span>024</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> Acinetobacter [PathogenOut].[KategorieNz].[Krankheit …    16 2024-01-29  <span style="text-decoration: underline;">2</span>024</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> Acinetobacter [PathogenOut].[KategorieNz].[Krankheit …    14 2024-02-05  <span style="text-decoration: underline;">2</span>024</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> Acinetobacter [PathogenOut].[KategorieNz].[Krankheit …    14 2024-02-12  <span style="text-decoration: underline;">2</span>024</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> Acinetobacter [PathogenOut].[KategorieNz].[Krankheit …    16 2024-02-19  <span style="text-decoration: underline;">2</span>024</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> Acinetobacter [PathogenOut].[KategorieNz].[Krankheit …     9 2024-02-26  <span style="text-decoration: underline;">2</span>024</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> Acinetobacter [PathogenOut].[KategorieNz].[Krankheit …    14 2024-03-04  <span style="text-decoration: underline;">2</span>024</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> Acinetobacter [PathogenOut].[KategorieNz].[Krankheit …    11 2024-03-11  <span style="text-decoration: underline;">2</span>024</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 3,851 more rows</span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Robert Challen.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

